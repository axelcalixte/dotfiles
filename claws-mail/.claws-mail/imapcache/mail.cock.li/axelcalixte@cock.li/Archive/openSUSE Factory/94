Return-Path: <opensuse-factory+bounces-95928-axelcalixte=cock.li@opensuse.org>
Delivered-To: axelcalixte@cock.li
Received: by mx1.cock.li (Postfix, from userid 65534)
	id 3B0DD82391; Mon,  3 Aug 2020 09:28:21 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on de8f7fd56dc0
X-Spam-Level: 
X-Spam-Status: No, score=-1.7 required=5.0 tests=BAYES_50,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_MED,RCVD_IN_MSPIKE_H4,RCVD_IN_MSPIKE_WL,RDNS_NONE,
	URIBL_BLOCKED shortcircuit=_SCTYPE_ autolearn=disabled version=3.4.2
Received: from hydra.opensuse.org (unknown [195.135.221.145])
	by mx1.cock.li (Postfix) with ESMTPS id 94CF481EA7
	for <axelcalixte@cock.li>; Mon,  3 Aug 2020 09:28:16 +0000 (UTC)
Received: from lists5.opensuse.org (baloo.infra.opensuse.org [192.168.47.38])
	by hydra.opensuse.org (Postfix) with ESMTP id D9E56216E6
	for <axelcalixte@cock.li>; Mon,  3 Aug 2020 09:28:15 +0000 (UTC)
Received: from baloo.infra.opensuse.org (localhost [127.0.0.1])
	by lists5.opensuse.org (Postfix) with ESMTP id 03E4A10E2C;
	Mon,  3 Aug 2020 09:27:54 +0000 (UTC)
X-Original-To: opensuse-factory@lists5.opensuse.org
Delivered-To: opensuse-factory@lists5.opensuse.org
Received: from relay2.suse.de (unknown [195.135.221.27])
	by lists5.opensuse.org (Postfix) with ESMTP id E2E6E10E2C
	for <opensuse-factory@lists5.opensuse.org>; Mon,  3 Aug 2020 09:27:53 +0000 (UTC)
Received: from phex.suse.de (phex.suse.de [10.160.4.31])
	by relay2.suse.de (Postfix) with ESMTP id 9CB452C15D
	for <opensuse-factory@opensuse.org>; Mon,  3 Aug 2020 09:28:17 +0000 (UTC)
Received: by phex.suse.de (Postfix, from userid 358)
	id 89D19498F; Mon,  3 Aug 2020 11:28:15 +0200 (CEST)
Date: Mon, 3 Aug 2020 11:28:15 +0200
From: Thorsten Kukuk <kukuk@suse.de>
To: opensuse-factory@opensuse.org
Subject: Re: update hangs on Plasma update tool ([opensuse-factory] New
 Tumbleweed snapshot 20200801)
Message-ID: <20200803092815.GA15532@suse.de>
References: <trinity-5317f446-6c6d-4d6e-8ddc-ae2bd32072f8-1596443488597@3c-app-gmx-bap18>
 <nycvar.YFH.7.77.849.2008031045490.14142@n3.vanv.qr>
 <11015074.tJN8lJgSeD@xrated>
Precedence: bulk
Mailing-List: contact opensuse-factory+help@opensuse.org; run by mlmmj
X-Mailinglist: opensuse-factory
List-Post: <mailto:opensuse-factory@opensuse.org>
List-Help: <mailto:opensuse-factory+help@opensuse.org>
List-Subscribe:  <mailto:opensuse-factory+subscribe@opensuse.org>
List-Unsubscribe:  <mailto:opensuse-factory+unsubscribe@opensuse.org>
List-Owner: <mailto:opensuse-factory+owner@opensuse.org>
List-Archive: <http://lists.opensuse.org/opensuse-factory/>
X-MIME-Notice: attachments may have been removed from this message
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <11015074.tJN8lJgSeD@xrated>
User-Agent: Mutt/1.10.1 (2018-07-13)

On Mon, Aug 03, Hans-Peter Jansen wrote:

> Am Montag, 3. August 2020, 10:46:50 CEST schrieb Jan Engelhardt:

> > Isn't this the historic problem of rpm having been unable to deal with
> > from-symlink and to-symlink changes.. (after all, it is trying
> > to update/replace it with a drwx /home)
> 
> ..along with the from-dir to-file and vice versa. 
> 
> Considering, that we all get bitten by it from time to time, question is, why 
> rpm refrains from solving this annoyance?

Because it is not solveable.
Assume you have:
/usr/lib/app/<scripts>

Now you want to move that to /usr/libexec/app and replace /usr/lib/app
with an symlink. What do you do with the content of /usr/lib/app during
that time? Especially, if this is coming from different packages, some
files got removed in the new package, ...

> Another question is, if packages should touch /home at all?

Either we create /home with correct permissions in filesystem.rpm, or
we trust that all tools (useradd, adduser, systemd-sysusers, ...) do
create /home correct. If they create /home at all and don't fail to 
create a user, since /home is missing.

Somebody needs to initialy create /home with the correct permissions,
and on a RPM based distribution this is RPM. So yes, one package needs
to contain and such touch /home.

  Thorsten

-- 
Thorsten Kukuk, Distinguished Engineer, Senior Architect SLES & MicroOS
SUSE Software Solutions Germany GmbH, Maxfeldstr. 5, 90409 Nuernberg, Germany
Managing Director: Felix Imendoerffer (HRB 36809, AG Nürnberg)
-- 
To unsubscribe, e-mail: opensuse-factory+unsubscribe@opensuse.org
To contact the owner, e-mail: opensuse-factory+owner@opensuse.org

