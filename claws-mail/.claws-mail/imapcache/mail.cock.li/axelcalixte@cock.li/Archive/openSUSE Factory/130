Return-Path: <opensuse-factory+bounces-95964-axelcalixte=cock.li@opensuse.org>
Delivered-To: axelcalixte@cock.li
Received: by mx1.cock.li (Postfix, from userid 65534)
	id 20F1482660; Tue,  4 Aug 2020 20:25:14 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on de8f7fd56dc0
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE,RDNS_NONE,T_DKIM_INVALID,
	URIBL_BLOCKED shortcircuit=_SCTYPE_ autolearn=disabled version=3.4.2
Received: from hydra.opensuse.org (unknown [IPv6:2001:67c:2178:8::18])
	by mx1.cock.li (Postfix) with ESMTPS id 8E1E2824BA
	for <axelcalixte@cock.li>; Tue,  4 Aug 2020 20:25:08 +0000 (UTC)
Authentication-Results: mx1.cock.li;
	dkim=fail reason="signature verification failed" (2048-bit key; unprotected) header.d=ameritech.net header.i=@ameritech.net header.b="dKkzjh+/";
	dkim-atps=neutral
Received: from lists5.opensuse.org (baloo.infra.opensuse.org [192.168.47.38])
	by hydra.opensuse.org (Postfix) with ESMTP id DB3BB2203E
	for <axelcalixte@cock.li>; Tue,  4 Aug 2020 20:25:07 +0000 (UTC)
Received: from baloo.infra.opensuse.org (localhost [127.0.0.1])
	by lists5.opensuse.org (Postfix) with ESMTP id 493BB10E2C;
	Tue,  4 Aug 2020 20:24:44 +0000 (UTC)
X-Original-To: opensuse-factory@lists5.opensuse.org
Delivered-To: opensuse-factory@lists5.opensuse.org
Received: from relay2.suse.de (unknown [195.135.221.27])
	by lists5.opensuse.org (Postfix) with ESMTP id 3F31810E2C
	for <opensuse-factory@lists5.opensuse.org>; Tue,  4 Aug 2020 20:24:44 +0000 (UTC)
Received: from relay2.suse.de (localhost [127.0.0.1])
	by relay2.suse.de (Postfix) with ESMTP id 8D5DC2C15D
	for <opensuse-factory@lists5.opensuse.org>; Tue,  4 Aug 2020 20:25:09 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at relay2.suse.de
Received: from relay2.suse.de ([127.0.0.1])
	by relay2.suse.de (relay2.suse.de [127.0.0.1]) (amavisd-new, port 10026)
	with ESMTP id WudXOFK28HoX for <opensuse-factory@lists5.opensuse.org>;
	Tue,  4 Aug 2020 20:25:03 +0000 (UTC)
Received: from mx2.suse.de (unknown [149.44.161.68])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by relay2.suse.de (Postfix) with ESMTPS id E8A9F2C15C
	for <opensuse-factory@lists5.opensuse.org>; Tue,  4 Aug 2020 20:25:03 +0000 (UTC)
Received: from sonic304-25.consmr.mail.ne1.yahoo.com (sonic304-25.consmr.mail.ne1.yahoo.com [66.163.191.151])
	(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
	(No client certificate requested)
	by mx2.suse.de (Postfix) with ESMTPS id C0293AC1C
	for <opensuse-factory@opensuse.org>; Tue,  4 Aug 2020 20:25:17 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ameritech.net; s=s2048; t=1596572699; bh=DKW7EWOjGojGppaaiWks3X1MZg7PlnyfAyzF0OAhcho=; h=Subject:To:References:From:Date:In-Reply-To:From:Subject; b=dKkzjh+/B7QpClcEPDy4BivZBcr0KqwWxhIgNAP1bCkGkyncB84wVUV5ZMEbX05405ZG2n/PGK/5IAB2sZjYDnMLepdNcikRoKEwX6+RFqvM+CQSe95TBTJCrZXIauRGOp4BKRHCtNg/t1uldVqCBPXSAdvOlnQXUDVnOR6kUvj8aV7XK1dTvN0qED1kiyVjWBXR5juHqOvdVq0ypKry16frYV5ckE+39P7Lgb/9M/V62+VZOyXso7oXvtqId7xu4PxbEPg3P32PDgVvKgZPazKoDu0GqXliHNZnWzRD/DlK15OSOFzjVeNSgZwUHnS76IFj5FfeUQujb3dk1QzgTA==
X-YMail-OSG: Vre2VjwVM1kG2rJBYEnoR23yZILiVBOn.GQaqiiVv86syflBq8Wx.hMg.771Uk2
 AARWrAgKORym6H0PA4B71g_DLrkMOn7Ur4GKnVSjlnPlX_mkOLUnH.J86yaJXqZBaxgTYYmR0FUa
 oeSzuZg2pRsDSI_gZxsbhcYqAskDGtJ3OPZTWZ8CXdWmG8dgORJVGHqPLm1m.p1pPBwPMOpkBPf5
 Qkq1RILcsvpL10jWLfOjOnmaB0iqK2zV8tImJcXsK40ebIItMEMlRhhscLpXiY5iIwUNWFOjUzIG
 lUaCzErVRlFJ7dg2ukEA9BREhWx0ePPWuJ8pCrngmMxa3O7GcshuJoicxpOD6..OY9r2l8MjWvGf
 c1us7TCRKI2pmFfscOEC13jVeQzcQOcdDtks5rNu2D7qf70J0t.742Bbo3z4RQx8iGVTIqEvNG6y
 rWHdPlxwudgaopoqQK8f3_kbO1JrkwCwBvQcb5aUiRrf2iWrd7fptPlufm0OU5I0n17x4BFI4Prw
 5mUB411NvcA7edadYL4Nm4t9srxriQ5z2u5nyI3iWeUzRzUxdUnj7EJTsnLrCG9WYKxGNlwmeIra
 Ekj6HwmnWcVoMiKPJY1QFOelscglTU2m9xuTsR9tdT.H.tEp45jvvMcjZ6mSqD3iTMAM3DwA2CwR
 NlFfzC.er_OMofSuzKcuHATGeN.QU1ieV0vINyzf30QrxuCPgbANp6L_2aqQc5DwPErVpB1QzEAe
 726i7wmuANdirJJWLrmqD63OIgWZ6JP1d_5RSSEXnyUDoLvUU8m0T.JXO2jFtOOnXFOTfPBICyHx
 n89fTXXSl0._SadcNjwjxmKBKMrAQTCd7YJ2.r32azY3RbCjMuZBRI5kk.KhKtfvVJD1tl96ZEKU
 eT1ppSZ30yu9FHP8xIAICCCCXdRtmBTsvJ.v4kFjBVzruky_xQ3kNdHll4gWFi2PpKpVj3d1a8ki
 8D6xB6xDlLJX4OOQeF6WLaSBvvpUFyylDERJMEKiY2twry5untmAnvMozIEHnK_dt5zGB731LKWE
 Ahr4Qe2oTVZQZg1DnoBjIa9hZf4g1cAwNJTA8pe_mlSxoWB7I_1RZ0xqKCmGrYUhfoRdxV2vY_My
 aSy4kx7KJE3W6ax3KRMZs9IIEfDv0U1HTDoc5Qh8ECaBF9rbB2jV7kNwruhGBhw0bfP0TdfN1RZQ
 KIFKzazGx4W0RAUWS_JDBxfDdFVVJHXE3a_wDDeHGfbwMdQuHwEUg.trzJ0rkJP2dyEHmi6l8EXi
 2GKKYkg8gi3msuPmABplJJQg0CGGlIaxDGWdqS8DE5c2vFPrbSmzPdR73oq_F2OQvP3V5Y1hQaoB
 DerXwxwFGX.GfKgRrT7o8V5g2wEBh4.V.Nmqg.Q_SGuVDAFSG
Received: from sonic.gate.mail.ne1.yahoo.com by sonic304.consmr.mail.ne1.yahoo.com with HTTP; Tue, 4 Aug 2020 20:24:59 +0000
Received: by smtp418.mail.ne1.yahoo.com (VZM Hermes SMTP Server) with ESMTPA ID 010124cb943495dbfe2ad1cc0de5906a;
          Tue, 04 Aug 2020 20:24:54 +0000 (UTC)
Subject: Re: [opensuse-factory] Purge-kernels not working?
To: opensuse-factory@opensuse.org
References: <a4253824-9731-2d17-8947-573c85ac990f@mailbox.org>
From: Neil Rickert <nrickert@ameritech.net>
Autocrypt: addr=nrickert@ameritech.net; prefer-encrypt=mutual; keydata=
 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 UATf
Message-ID: <da508787-3d6f-15d3-a5a3-f28311f353f3@ameritech.net>
Date: Tue, 4 Aug 2020 15:24:48 -0500
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.10.0
Precedence: bulk
Mailing-List: contact opensuse-factory+help@opensuse.org; run by mlmmj
X-Mailinglist: opensuse-factory
List-Post: <mailto:opensuse-factory@opensuse.org>
List-Help: <mailto:opensuse-factory+help@opensuse.org>
List-Subscribe:  <mailto:opensuse-factory+subscribe@opensuse.org>
List-Unsubscribe:  <mailto:opensuse-factory+unsubscribe@opensuse.org>
List-Owner: <mailto:opensuse-factory+owner@opensuse.org>
List-Archive: <http://lists.opensuse.org/opensuse-factory/>
X-MIME-Notice: attachments may have been removed from this message
MIME-Version: 1.0
In-Reply-To: <a4253824-9731-2d17-8947-573c85ac990f@mailbox.org>
Content-Type: text/plain; charset=utf-8
Content-Language: en-US
Content-Transfer-Encoding: 8bit
X-Mailer: WebService/1.1.16397 mail.backend.jedi.jws.acl:role.jedi.acl.token.atz.jws.hermes.yahoo Apache-HttpAsyncClient/4.1.4 (Java/11.0.7)

On 8/4/20 12:32 PM, Frank KrÃ¼ger wrote:

> Given TW20200802 (with the kernel:stable repo enabled), I have a bunch
> of old kernels even though 'multiversion.kernels = latest,running" is
> "enabled" in /etc/zypp/zypp.conf. As a matter of fact, 'sudo zypper
> purge-kernels' does not have any effect. The same issue seems to apply
> to Leap 15.2.

It is sort-of working here in a somewhat broken fashion.

Does "/boot/do_purge_kernels" exist?  If it does, then maybe the service
is not enabled.

If "zypper purge-kernels" is not doing anything, then something is odd.
 Perhaps you confused it by not having "latest-1" in that
"multiversion.kernels" line.

Here's what is happening here:

On Leap 15.2, I have the standard "multiversion.kernels" line.  So there
are two kernels retained.  After the last kernel update, I ran
zypper purge-kernels
I ran that manually, and enabled the service afterwards.  It did what I
expected.  It removed the oldest kernel and the devel packages
associated with that kernel.

On my Tumbleweed systems, I have
multiversion.kernels = oldest,latest,latest-1,running

The oldest kernel is the last 5.6 kernel.

On one Tumbleweed system, purge-kernels did as expected.  It removed the
oldest 5.7 kernel and the devel packages associated with that.

On another Tumbleweed system, it removed the oldest 5.7 kernel (I think
it was 5.7.5-1.2), but it failed to remove the associated devel packages.

What's peculiar about that last mentioned system, is that the 5.6 kernel
being kept does not have any associated devel packages (those were
removed due to an earlier bug in purge-kernels).  So, after the
purge-kernel I am left with 3 kernels and 3 sets of devel packages.  But
the devel packages do not match the kernels.  I'm guessing this will
correct itself when a 5.8 kernel arrives and I manually remove the old
5.6 kernel.

If you want me to test it, I can experiment with Tumbleweed in a VM.  I
could clone that, then remove the "latest-1" for the clone and see
whether "zypper purge-kernels" deletes the corresponding kernel.
-- 
To unsubscribe, e-mail: opensuse-factory+unsubscribe@opensuse.org
To contact the owner, e-mail: opensuse-factory+owner@opensuse.org

